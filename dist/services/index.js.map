{"version":3,"sources":["../../src/services/index.js"],"names":["service","require","module","exports","app","db","createConnection","process","env","DATABASE_URL","Article","Category","Country","CountryCategory","driveService","get","rq","rs","params","id","then","o","render","inner","use","Model"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;AACA,IAAMA,UAAUC,QAAQ,mBAAR,CAAhB;;AAEAC,OAAOC,OAAP,GAAiB,YAAY;AAC3B,MAAMC,MAAM,IAAZ,CAD2B,CACT;AAClB,MAAMC,KAAK,mBAASC,gBAAT,CAA0BC,QAAQC,GAAR,CAAYC,YAAZ,IAA4B,6BAAtD,CAAX;;AAF2B,gBAG6B,sBAAOJ,EAAP,CAH7B;AAAA,MAGnBK,OAHmB,WAGnBA,OAHmB;AAAA,MAGVC,QAHU,WAGVA,QAHU;AAAA,MAGAC,OAHA,WAGAA,OAHA;AAAA,MAGSC,eAHT,WAGSA,eAHT;;AAAA,MAInBC,YAJmB,oBAInBA,YAJmB;;;AAM3BV,MAAIW,GAAJ,CAAQ,uBAAR,EAAiC,UAACC,EAAD,EAAKC,EAAL,EAAY;AAC3C,WAAOH,aAAaC,GAAb,CAAiBC,GAAGE,MAAH,CAAUC,EAA3B,EAA+BC,IAA/B,CAAoC,UAACC,CAAD;AAAA,aAAOJ,GAAGK,MAAH,CAAU,kBAAV,EAA8B,EAACC,OAAOF,CAAR,EAA9B,CAAP;AAAA,KAApC,CAAP;AACD,GAFD;AAGAjB,MAAIoB,GAAJ,CAAQ,YAAR,EAAsBV,YAAtB;AACAV,MAAIoB,GAAJ,CAAQ,eAAR,EAAyBxB,QAAQ,EAAEyB,OAAOf,OAAT,EAAR,CAAzB;AACAN,MAAIoB,GAAJ,CAAQ,iBAAR,EAA2BxB,QAAQ,EAAEyB,OAAOd,QAAT,EAAR,CAA3B;AACAP,MAAIoB,GAAJ,CAAQ,gBAAR,EAA0BxB,QAAQ,EAAEyB,OAAOb,OAAT,EAAR,CAA1B;AACAR,MAAIoB,GAAJ,CAAQ,yBAAR,EAAmCxB,QAAQ,EAAEyB,OAAOZ,eAAT,EAAR,CAAnC;AACD,CAdD","file":"index.js","sourcesContent":["import models from '../models';\nimport mongoose from 'mongoose';\nimport feathers from 'feathers';\nimport googleServices from './google';\nconst service = require('feathers-mongoose');\n\nmodule.exports = function () {\n  const app = this; // eslint-disable-line no-unused-vars\n  const db = mongoose.createConnection(process.env.DATABASE_URL || 'mongodb://localhost/content')\n  const { Article, Category, Country, CountryCategory } = models(db);\n  const { driveService} = googleServices;\n\n  app.get('/api/preview-html/:id', (rq, rs) => {\n    return driveService.get(rq.params.id).then((o) => rs.render('preview.mustache', {inner: o}))\n  });\n  app.use('/api/drive', driveService);\n  app.use('/api/articles', service({ Model: Article }));\n  app.use('/api/categories', service({ Model: Category }));\n  app.use('/api/countries', service({ Model: Country }));\n  app.use('/api/country-categories', service({ Model: CountryCategory }));\n};\n"]}